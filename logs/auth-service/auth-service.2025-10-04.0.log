{"timestamp":"2025-10-04 17:48:08,001","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"Starting AuthServiceApplication v0.0.1-SNAPSHOT using Java 21 with PID 1 (/app/app.jar started by spring in /app)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:08,052","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"The following 1 profile is active: \"local\"","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:11,129","level":"INFO ","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:11,364","level":"INFO ","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","message":"Finished Spring Data repository scanning in 207 ms. Found 1 JPA repository interface.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:13,564","level":"INFO ","thread":"main","logger":"o.s.b.w.embedded.tomcat.TomcatWebServer","message":"Tomcat initialized with port 8081 (http)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:13,595","level":"INFO ","thread":"main","logger":"o.apache.coyote.http11.Http11NioProtocol","message":"Initializing ProtocolHandler [\"http-nio-8081\"]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:13,601","level":"INFO ","thread":"main","logger":"o.apache.catalina.core.StandardService","message":"Starting service [Tomcat]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:13,602","level":"INFO ","thread":"main","logger":"org.apache.catalina.core.StandardEngine","message":"Starting Servlet engine: [Apache Tomcat/10.1.33]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:13,723","level":"INFO ","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]","message":"Initializing Spring embedded WebApplicationContext","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:13,726","level":"INFO ","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","message":"Root WebApplicationContext: initialization completed in 5443 ms","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:15,299","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Starting...","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:15,645","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2e349cf2","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:15,651","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Start completed.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:15,740","level":"INFO ","thread":"main","logger":"org.flywaydb.core.FlywayExecutor","message":"Database: jdbc:postgresql://postgres-user:5432/user_db (PostgreSQL 15.14)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:15,867","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbValidate","message":"Successfully validated 2 migrations (execution time 00:00.070s)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:15,912","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbMigrate","message":"Current version of schema \"public\": 1","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:15,919","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbMigrate","message":"Schema \"public\" is up to date. No migration necessary.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:16,276","level":"INFO ","thread":"main","logger":"o.hibernate.jpa.internal.util.LogHelper","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:16,708","level":"INFO ","thread":"main","logger":"org.hibernate.Version","message":"HHH000412: Hibernate ORM core version 6.6.2.Final","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:16,808","level":"INFO ","thread":"main","logger":"o.h.c.internal.RegionFactoryInitiator","message":"HHH000026: Second-level cache disabled","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:17,398","level":"INFO ","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:17,464","level":"WARN ","thread":"main","logger":"org.hibernate.orm.deprecation","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:17,484","level":"INFO ","thread":"main","logger":"org.hibernate.orm.connections.pooling","message":"HHH10001005: Database info:\n	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']\n	Database driver: undefined/unknown\n	Database version: 15.14\n	Autocommit mode: undefined/unknown\n	Isolation level: undefined/unknown\n	Minimum pool size: undefined/unknown\n	Maximum pool size: undefined/unknown","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:18,270","level":"INFO ","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:18,312","level":"INFO ","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:19,356","level":"WARN ","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:20,361","level":"INFO ","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver","message":"Exposing 1 endpoint beneath base path '/actuator'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:20,463","level":"INFO ","thread":"main","logger":"o.apache.coyote.http11.Http11NioProtocol","message":"Starting ProtocolHandler [\"http-nio-8081\"]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:20,481","level":"INFO ","thread":"main","logger":"o.s.b.w.embedded.tomcat.TomcatWebServer","message":"Tomcat started on port 8081 (http) with context path '/'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:48:20,505","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"Started AuthServiceApplication in 14.359 seconds (process running for 16.604)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:51:51,789","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:51:51,789","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"o.s.web.servlet.DispatcherServlet","message":"Initializing Servlet 'dispatcherServlet'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:51:51,791","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"o.s.web.servlet.DispatcherServlet","message":"Completed initialization in 1 ms","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:53:09,899","level":"INFO ","thread":"http-nio-8081-exec-6","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new3@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:53:10,167","level":"ERROR","thread":"http-nio-8081-exec-6","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new3@example.com - Error: Error creating user: Failed to create user. Status: 409","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:53:17,132","level":"INFO ","thread":"http-nio-8081-exec-8","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new3@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:53:17,156","level":"ERROR","thread":"http-nio-8081-exec-8","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new3@example.com - Error: Error creating user: Failed to create user. Status: 409","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:53:19,610","level":"INFO ","thread":"http-nio-8081-exec-9","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new3@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:53:19,632","level":"ERROR","thread":"http-nio-8081-exec-9","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new3@example.com - Error: Error creating user: Failed to create user. Status: 409","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:53:34,033","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new6@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:53:34,372","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"c.renter.auth.controller.AuthController","message":"Registration successful for email: new6@example.com with userId: e97b155f-6cc5-4960-a8aa-218b3991c50c","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:53:34,419","level":"WARN ","thread":"http-nio-8081-exec-1","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"SQL Error: 0, SQLState: 23505","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:53:34,419","level":"ERROR","thread":"http-nio-8081-exec-1","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 17:53:34,434","level":"ERROR","thread":"http-nio-8081-exec-1","logger":"o.a.c.c.C.[.[.[/].[dispatcherServlet]","message":"Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [users_phone_number_key]] with root cause","exception":"org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.\n	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)\n	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)\n	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)\n	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)\n	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)\n	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)\n	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155)\n	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\n	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\n	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)\n	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:134)\n	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:55)\n	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)\n	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)\n	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)\n	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:104)\n	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:110)\n	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:644)\n	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:511)\n	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:414)\n	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:41)\n	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\n	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1429)\n	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:491)\n	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2354)\n	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1978)\n	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\n	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\n	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\n	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\n	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\n	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:795)\n	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758)\n	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:698)\n	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:416)\n	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)\n	at com.renter.auth.controller.AuthController$$SpringCGLIB$$0.register(<generated>)\n	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n	at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)\n	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)\n	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\n	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)\n	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)\n	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)\n	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)\n	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\n	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\n	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\n	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\n	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\n	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\n	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)\n	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\n	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)\n	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)\n	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)\n	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)\n	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)\n	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)\n	at java.base/java.lang.Thread.run(Thread.java:1583)\n","service":"auth-service"}
{"timestamp":"2025-10-04 18:10:30,962","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"o.s.b.w.embedded.tomcat.GracefulShutdown","message":"Commencing graceful shutdown. Waiting for active requests to complete","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:10:30,966","level":"INFO ","thread":"tomcat-shutdown","logger":"o.s.b.w.embedded.tomcat.GracefulShutdown","message":"Graceful shutdown complete","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:10:30,978","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:10:30,986","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Shutdown initiated...","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:10:31,002","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Shutdown completed.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:39,161","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"Starting AuthServiceApplication v0.0.1-SNAPSHOT using Java 21 with PID 1 (/app/app.jar started by spring in /app)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:39,165","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"The following 1 profile is active: \"local\"","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:42,554","level":"INFO ","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:42,688","level":"INFO ","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","message":"Finished Spring Data repository scanning in 113 ms. Found 1 JPA repository interface.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:44,944","level":"INFO ","thread":"main","logger":"o.s.b.w.embedded.tomcat.TomcatWebServer","message":"Tomcat initialized with port 8081 (http)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:45,022","level":"INFO ","thread":"main","logger":"o.apache.coyote.http11.Http11NioProtocol","message":"Initializing ProtocolHandler [\"http-nio-8081\"]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:45,029","level":"INFO ","thread":"main","logger":"o.apache.catalina.core.StandardService","message":"Starting service [Tomcat]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:45,033","level":"INFO ","thread":"main","logger":"org.apache.catalina.core.StandardEngine","message":"Starting Servlet engine: [Apache Tomcat/10.1.33]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:45,136","level":"INFO ","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]","message":"Initializing Spring embedded WebApplicationContext","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:45,137","level":"INFO ","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","message":"Root WebApplicationContext: initialization completed in 5819 ms","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:47,062","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Starting...","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:47,561","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@20dd5870","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:47,565","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Start completed.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:47,698","level":"INFO ","thread":"main","logger":"org.flywaydb.core.FlywayExecutor","message":"Database: jdbc:postgresql://postgres-user:5432/user_db (PostgreSQL 15.14)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:48,063","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbValidate","message":"Successfully validated 2 migrations (execution time 00:00.184s)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:48,095","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbMigrate","message":"Current version of schema \"public\": 1","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:48,102","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbMigrate","message":"Schema \"public\" is up to date. No migration necessary.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:48,450","level":"INFO ","thread":"main","logger":"o.hibernate.jpa.internal.util.LogHelper","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:48,652","level":"INFO ","thread":"main","logger":"org.hibernate.Version","message":"HHH000412: Hibernate ORM core version 6.6.2.Final","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:48,739","level":"INFO ","thread":"main","logger":"o.h.c.internal.RegionFactoryInitiator","message":"HHH000026: Second-level cache disabled","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:49,212","level":"INFO ","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:49,282","level":"WARN ","thread":"main","logger":"org.hibernate.orm.deprecation","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:49,300","level":"INFO ","thread":"main","logger":"org.hibernate.orm.connections.pooling","message":"HHH10001005: Database info:\n	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']\n	Database driver: undefined/unknown\n	Database version: 15.14\n	Autocommit mode: undefined/unknown\n	Isolation level: undefined/unknown\n	Minimum pool size: undefined/unknown\n	Maximum pool size: undefined/unknown","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:50,281","level":"INFO ","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:50,327","level":"INFO ","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:51,629","level":"WARN ","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:53,060","level":"INFO ","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver","message":"Exposing 1 endpoint beneath base path '/actuator'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:53,135","level":"INFO ","thread":"main","logger":"o.apache.coyote.http11.Http11NioProtocol","message":"Starting ProtocolHandler [\"http-nio-8081\"]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:53,150","level":"INFO ","thread":"main","logger":"o.s.b.w.embedded.tomcat.TomcatWebServer","message":"Tomcat started on port 8081 (http) with context path '/'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:53,169","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"Started AuthServiceApplication in 15.691 seconds (process running for 17.325)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:59,843","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:59,843","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"o.s.web.servlet.DispatcherServlet","message":"Initializing Servlet 'dispatcherServlet'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:59,845","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"o.s.web.servlet.DispatcherServlet","message":"Completed initialization in 2 ms","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:11:59,912","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new6@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:01,094","level":"ERROR","thread":"http-nio-8081-exec-1","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new6@example.com - Error: Error creating user: Failed to create user. Status: 409","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:23,972","level":"INFO ","thread":"http-nio-8081-exec-4","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new6@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:24,001","level":"ERROR","thread":"http-nio-8081-exec-4","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new6@example.com - Error: Error creating user: Failed to create user. Status: 409","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:32,208","level":"INFO ","thread":"http-nio-8081-exec-6","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new7@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:32,449","level":"INFO ","thread":"http-nio-8081-exec-6","logger":"c.renter.auth.controller.AuthController","message":"Registration successful for email: new7@example.com with userId: bb2d202e-f0e9-467f-861b-334d3b4df3b9","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:32,491","level":"WARN ","thread":"http-nio-8081-exec-6","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"SQL Error: 0, SQLState: 23505","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:32,492","level":"ERROR","thread":"http-nio-8081-exec-6","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:32,511","level":"ERROR","thread":"http-nio-8081-exec-6","logger":"o.a.c.c.C.[.[.[/].[dispatcherServlet]","message":"Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [users_phone_number_key]] with root cause","exception":"org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.\n	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)\n	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)\n	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)\n	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)\n	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)\n	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)\n	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155)\n	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\n	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\n	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)\n	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:134)\n	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:55)\n	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)\n	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)\n	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)\n	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:104)\n	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:110)\n	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:644)\n	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:511)\n	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:414)\n	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:41)\n	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\n	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1429)\n	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:491)\n	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2354)\n	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1978)\n	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\n	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\n	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\n	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\n	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\n	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:795)\n	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758)\n	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:698)\n	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:416)\n	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)\n	at com.renter.auth.controller.AuthController$$SpringCGLIB$$0.register(<generated>)\n	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n	at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)\n	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)\n	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\n	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)\n	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)\n	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)\n	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)\n	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\n	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\n	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\n	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\n	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\n	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\n	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)\n	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\n	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)\n	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)\n	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)\n	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)\n	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)\n	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)\n	at java.base/java.lang.Thread.run(Thread.java:1583)\n","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:55,203","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"o.s.b.w.embedded.tomcat.GracefulShutdown","message":"Commencing graceful shutdown. Waiting for active requests to complete","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:55,206","level":"INFO ","thread":"tomcat-shutdown","logger":"o.s.b.w.embedded.tomcat.GracefulShutdown","message":"Graceful shutdown complete","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:55,217","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:55,229","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Shutdown initiated...","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:12:55,243","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Shutdown completed.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:22,873","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"Starting AuthServiceApplication v0.0.1-SNAPSHOT using Java 21 with PID 1 (/app/app.jar started by spring in /app)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:22,876","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"The following 1 profile is active: \"local\"","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:25,523","level":"INFO ","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:25,667","level":"INFO ","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","message":"Finished Spring Data repository scanning in 109 ms. Found 1 JPA repository interface.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:27,666","level":"INFO ","thread":"main","logger":"o.s.b.w.embedded.tomcat.TomcatWebServer","message":"Tomcat initialized with port 8081 (http)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:27,691","level":"INFO ","thread":"main","logger":"o.apache.coyote.http11.Http11NioProtocol","message":"Initializing ProtocolHandler [\"http-nio-8081\"]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:27,698","level":"INFO ","thread":"main","logger":"o.apache.catalina.core.StandardService","message":"Starting service [Tomcat]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:27,699","level":"INFO ","thread":"main","logger":"org.apache.catalina.core.StandardEngine","message":"Starting Servlet engine: [Apache Tomcat/10.1.33]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:27,780","level":"INFO ","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]","message":"Initializing Spring embedded WebApplicationContext","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:27,782","level":"INFO ","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","message":"Root WebApplicationContext: initialization completed in 4782 ms","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:29,532","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Starting...","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:30,131","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@c6a692e","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:30,142","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Start completed.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:30,217","level":"INFO ","thread":"main","logger":"org.flywaydb.core.FlywayExecutor","message":"Database: jdbc:postgresql://postgres-user:5432/user_db (PostgreSQL 15.14)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:30,381","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbValidate","message":"Successfully validated 2 migrations (execution time 00:00.083s)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:30,437","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbMigrate","message":"Current version of schema \"public\": 1","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:30,444","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbMigrate","message":"Schema \"public\" is up to date. No migration necessary.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:30,667","level":"INFO ","thread":"main","logger":"o.hibernate.jpa.internal.util.LogHelper","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:30,775","level":"INFO ","thread":"main","logger":"org.hibernate.Version","message":"HHH000412: Hibernate ORM core version 6.6.2.Final","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:30,824","level":"INFO ","thread":"main","logger":"o.h.c.internal.RegionFactoryInitiator","message":"HHH000026: Second-level cache disabled","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:31,097","level":"INFO ","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:31,157","level":"WARN ","thread":"main","logger":"org.hibernate.orm.deprecation","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:31,172","level":"INFO ","thread":"main","logger":"org.hibernate.orm.connections.pooling","message":"HHH10001005: Database info:\n	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']\n	Database driver: undefined/unknown\n	Database version: 15.14\n	Autocommit mode: undefined/unknown\n	Isolation level: undefined/unknown\n	Minimum pool size: undefined/unknown\n	Maximum pool size: undefined/unknown","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:31,940","level":"INFO ","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:31,967","level":"INFO ","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:32,941","level":"WARN ","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:33,953","level":"INFO ","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver","message":"Exposing 1 endpoint beneath base path '/actuator'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:34,014","level":"INFO ","thread":"main","logger":"o.apache.coyote.http11.Http11NioProtocol","message":"Starting ProtocolHandler [\"http-nio-8081\"]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:34,026","level":"INFO ","thread":"main","logger":"o.s.b.w.embedded.tomcat.TomcatWebServer","message":"Tomcat started on port 8081 (http) with context path '/'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:34,043","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"Started AuthServiceApplication in 12.754 seconds (process running for 14.297)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:38,908","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:38,908","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"o.s.web.servlet.DispatcherServlet","message":"Initializing Servlet 'dispatcherServlet'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:38,910","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"o.s.web.servlet.DispatcherServlet","message":"Completed initialization in 2 ms","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:38,980","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new7@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:40,208","level":"ERROR","thread":"http-nio-8081-exec-1","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new7@example.com - Error: Error creating user: Failed to create user. Status: 409","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:50,193","level":"INFO ","thread":"http-nio-8081-exec-4","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new8@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:50,476","level":"INFO ","thread":"http-nio-8081-exec-4","logger":"c.renter.auth.controller.AuthController","message":"Registration successful for email: new8@example.com with userId: 0944ed02-3948-44f7-b0d0-00c82ce3d0c0","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:50,500","level":"WARN ","thread":"http-nio-8081-exec-4","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"SQL Error: 0, SQLState: 23505","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:50,501","level":"ERROR","thread":"http-nio-8081-exec-4","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:50,512","level":"ERROR","thread":"http-nio-8081-exec-4","logger":"c.r.a.exception.GlobalExceptionHandler","message":"Database constraint violation: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [users_phone_number_key]","exception":"org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [users_phone_number_key]\n	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)\n	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)\n	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\n	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:795)\n	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758)\n	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:698)\n	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:416)\n	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)\n	at com.renter.auth.controller.AuthController$$SpringCGLIB$$0.register(<generated>)\n	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n	at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)\n	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)\n	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\n	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)\n	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)\n	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)\n	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)\n	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\n	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\n	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\n	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\n	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\n	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\n	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)\n	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\n	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)\n	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)\n	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)\n	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)\n	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)\n	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)\n	at java.base/java.lang.Thread.run(Thread.java:1583)\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]\n	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)\n	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)\n	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\n	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\n	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:134)\n	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:55)\n	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)\n	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)\n	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)\n	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:104)\n	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:110)\n	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:644)\n	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:511)\n	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:414)\n	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:41)\n	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\n	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1429)\n	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:491)\n	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2354)\n	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1978)\n	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\n	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\n	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\n	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\n	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\n	... 60 common frames omitted\nCaused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.\n	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)\n	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)\n	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)\n	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)\n	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)\n	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)\n	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155)\n	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\n	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\n	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)\n	... 81 common frames omitted\n","service":"auth-service"}
{"timestamp":"2025-10-04 18:13:50,516","level":"ERROR","thread":"http-nio-8081-exec-4","logger":"c.r.a.exception.GlobalExceptionHandler","message":"Error [409]: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [users_phone_number_key]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:14:06,803","level":"INFO ","thread":"http-nio-8081-exec-5","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new8@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:14:06,824","level":"ERROR","thread":"http-nio-8081-exec-5","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new8@example.com - Error: Error creating user: Failed to create user. Status: 409","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:02,234","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"o.s.b.w.embedded.tomcat.GracefulShutdown","message":"Commencing graceful shutdown. Waiting for active requests to complete","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:02,236","level":"INFO ","thread":"tomcat-shutdown","logger":"o.s.b.w.embedded.tomcat.GracefulShutdown","message":"Graceful shutdown complete","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:02,248","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:02,252","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Shutdown initiated...","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:02,287","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Shutdown completed.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:23,648","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"Starting AuthServiceApplication v0.0.1-SNAPSHOT using Java 21 with PID 1 (/app/app.jar started by spring in /app)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:23,651","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"The following 1 profile is active: \"local\"","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:26,446","level":"INFO ","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:26,590","level":"INFO ","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","message":"Finished Spring Data repository scanning in 124 ms. Found 1 JPA repository interface.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:28,592","level":"INFO ","thread":"main","logger":"o.s.b.w.embedded.tomcat.TomcatWebServer","message":"Tomcat initialized with port 8081 (http)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:28,625","level":"INFO ","thread":"main","logger":"o.apache.coyote.http11.Http11NioProtocol","message":"Initializing ProtocolHandler [\"http-nio-8081\"]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:28,631","level":"INFO ","thread":"main","logger":"o.apache.catalina.core.StandardService","message":"Starting service [Tomcat]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:28,632","level":"INFO ","thread":"main","logger":"org.apache.catalina.core.StandardEngine","message":"Starting Servlet engine: [Apache Tomcat/10.1.33]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:28,746","level":"INFO ","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]","message":"Initializing Spring embedded WebApplicationContext","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:28,750","level":"INFO ","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","message":"Root WebApplicationContext: initialization completed in 4933 ms","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:30,408","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Starting...","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:30,904","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2e929182","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:30,912","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Start completed.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:31,004","level":"INFO ","thread":"main","logger":"org.flywaydb.core.FlywayExecutor","message":"Database: jdbc:postgresql://postgres-user:5432/user_db (PostgreSQL 15.14)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:31,136","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbValidate","message":"Successfully validated 2 migrations (execution time 00:00.057s)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:31,185","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbMigrate","message":"Current version of schema \"public\": 1","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:31,191","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbMigrate","message":"Schema \"public\" is up to date. No migration necessary.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:31,489","level":"INFO ","thread":"main","logger":"o.hibernate.jpa.internal.util.LogHelper","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:31,654","level":"INFO ","thread":"main","logger":"org.hibernate.Version","message":"HHH000412: Hibernate ORM core version 6.6.2.Final","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:31,802","level":"INFO ","thread":"main","logger":"o.h.c.internal.RegionFactoryInitiator","message":"HHH000026: Second-level cache disabled","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:32,285","level":"INFO ","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:32,372","level":"WARN ","thread":"main","logger":"org.hibernate.orm.deprecation","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:32,394","level":"INFO ","thread":"main","logger":"org.hibernate.orm.connections.pooling","message":"HHH10001005: Database info:\n	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']\n	Database driver: undefined/unknown\n	Database version: 15.14\n	Autocommit mode: undefined/unknown\n	Isolation level: undefined/unknown\n	Minimum pool size: undefined/unknown\n	Maximum pool size: undefined/unknown","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:33,354","level":"INFO ","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:33,384","level":"INFO ","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:34,584","level":"WARN ","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:35,529","level":"INFO ","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver","message":"Exposing 1 endpoint beneath base path '/actuator'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:35,615","level":"INFO ","thread":"main","logger":"o.apache.coyote.http11.Http11NioProtocol","message":"Starting ProtocolHandler [\"http-nio-8081\"]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:35,631","level":"INFO ","thread":"main","logger":"o.s.b.w.embedded.tomcat.TomcatWebServer","message":"Tomcat started on port 8081 (http) with context path '/'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:35,653","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"Started AuthServiceApplication in 13.514 seconds (process running for 15.014)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:36,171","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:36,171","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"o.s.web.servlet.DispatcherServlet","message":"Initializing Servlet 'dispatcherServlet'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:36,172","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"o.s.web.servlet.DispatcherServlet","message":"Completed initialization in 1 ms","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:36,257","level":"INFO ","thread":"http-nio-8081-exec-1","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new8@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:37,423","level":"ERROR","thread":"http-nio-8081-exec-1","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new8@example.com - Error: Error creating user: Failed to create user. Status: 409","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:51,929","level":"INFO ","thread":"http-nio-8081-exec-4","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new9@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:52,159","level":"INFO ","thread":"http-nio-8081-exec-4","logger":"c.renter.auth.controller.AuthController","message":"KeycloakUserId is 72ccbb33-e0f9-4b79-9732-5e2ad0c3f206","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:52,189","level":"INFO ","thread":"http-nio-8081-exec-4","logger":"c.renter.auth.controller.AuthController","message":"Registration successful for email: new9@example.com with userId: 11316210-f675-469a-b892-1ff3e0557477","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:52,215","level":"WARN ","thread":"http-nio-8081-exec-4","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"SQL Error: 0, SQLState: 23505","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:52,215","level":"ERROR","thread":"http-nio-8081-exec-4","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:52,224","level":"ERROR","thread":"http-nio-8081-exec-4","logger":"c.r.a.exception.GlobalExceptionHandler","message":"Database constraint violation: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [users_phone_number_key]","exception":"org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [users_phone_number_key]\n	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)\n	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)\n	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\n	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:795)\n	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758)\n	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:698)\n	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:416)\n	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)\n	at com.renter.auth.controller.AuthController$$SpringCGLIB$$0.register(<generated>)\n	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n	at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)\n	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)\n	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\n	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)\n	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)\n	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)\n	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)\n	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\n	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\n	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\n	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\n	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\n	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\n	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)\n	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\n	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)\n	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)\n	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)\n	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)\n	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)\n	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)\n	at java.base/java.lang.Thread.run(Thread.java:1583)\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]\n	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)\n	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)\n	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\n	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\n	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:134)\n	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:55)\n	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)\n	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)\n	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)\n	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:104)\n	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:110)\n	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:644)\n	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:511)\n	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:414)\n	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:41)\n	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\n	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1429)\n	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:491)\n	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2354)\n	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1978)\n	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\n	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\n	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\n	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\n	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\n	... 60 common frames omitted\nCaused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.\n	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)\n	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)\n	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)\n	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)\n	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)\n	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)\n	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155)\n	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\n	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\n	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)\n	... 81 common frames omitted\n","service":"auth-service"}
{"timestamp":"2025-10-04 18:26:52,228","level":"ERROR","thread":"http-nio-8081-exec-4","logger":"c.r.a.exception.GlobalExceptionHandler","message":"Error [409]: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [users_phone_number_key]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:15,517","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"o.s.b.w.embedded.tomcat.GracefulShutdown","message":"Commencing graceful shutdown. Waiting for active requests to complete","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:15,520","level":"INFO ","thread":"tomcat-shutdown","logger":"o.s.b.w.embedded.tomcat.GracefulShutdown","message":"Graceful shutdown complete","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:15,538","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:15,548","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Shutdown initiated...","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:15,566","level":"INFO ","thread":"SpringApplicationShutdownHook","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Shutdown completed.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:35,575","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"Starting AuthServiceApplication v0.0.1-SNAPSHOT using Java 21 with PID 1 (/app/app.jar started by spring in /app)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:35,580","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"The following 1 profile is active: \"local\"","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:38,167","level":"INFO ","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:38,279","level":"INFO ","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","message":"Finished Spring Data repository scanning in 94 ms. Found 1 JPA repository interface.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:40,121","level":"INFO ","thread":"main","logger":"o.s.b.w.embedded.tomcat.TomcatWebServer","message":"Tomcat initialized with port 8081 (http)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:40,148","level":"INFO ","thread":"main","logger":"o.apache.coyote.http11.Http11NioProtocol","message":"Initializing ProtocolHandler [\"http-nio-8081\"]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:40,152","level":"INFO ","thread":"main","logger":"o.apache.catalina.core.StandardService","message":"Starting service [Tomcat]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:40,153","level":"INFO ","thread":"main","logger":"org.apache.catalina.core.StandardEngine","message":"Starting Servlet engine: [Apache Tomcat/10.1.33]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:40,249","level":"INFO ","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]","message":"Initializing Spring embedded WebApplicationContext","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:40,251","level":"INFO ","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","message":"Root WebApplicationContext: initialization completed in 4547 ms","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:41,602","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Starting...","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:42,170","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6eaa6b0c","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:42,174","level":"INFO ","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource","message":"HikariPool-1 - Start completed.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:42,250","level":"INFO ","thread":"main","logger":"org.flywaydb.core.FlywayExecutor","message":"Database: jdbc:postgresql://postgres-user:5432/user_db (PostgreSQL 15.14)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:42,422","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbValidate","message":"Successfully validated 2 migrations (execution time 00:00.083s)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:42,482","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbMigrate","message":"Current version of schema \"public\": 1","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:42,494","level":"INFO ","thread":"main","logger":"o.f.core.internal.command.DbMigrate","message":"Schema \"public\" is up to date. No migration necessary.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:42,783","level":"INFO ","thread":"main","logger":"o.hibernate.jpa.internal.util.LogHelper","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:42,979","level":"INFO ","thread":"main","logger":"org.hibernate.Version","message":"HHH000412: Hibernate ORM core version 6.6.2.Final","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:43,095","level":"INFO ","thread":"main","logger":"o.h.c.internal.RegionFactoryInitiator","message":"HHH000026: Second-level cache disabled","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:43,511","level":"INFO ","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:43,559","level":"WARN ","thread":"main","logger":"org.hibernate.orm.deprecation","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:43,571","level":"INFO ","thread":"main","logger":"org.hibernate.orm.connections.pooling","message":"HHH10001005: Database info:\n	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']\n	Database driver: undefined/unknown\n	Database version: 15.14\n	Autocommit mode: undefined/unknown\n	Isolation level: undefined/unknown\n	Minimum pool size: undefined/unknown\n	Maximum pool size: undefined/unknown","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:44,268","level":"INFO ","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:44,296","level":"INFO ","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:45,109","level":"WARN ","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:46,159","level":"INFO ","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver","message":"Exposing 1 endpoint beneath base path '/actuator'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:46,250","level":"INFO ","thread":"main","logger":"o.apache.coyote.http11.Http11NioProtocol","message":"Starting ProtocolHandler [\"http-nio-8081\"]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:46,269","level":"INFO ","thread":"main","logger":"o.s.b.w.embedded.tomcat.TomcatWebServer","message":"Tomcat started on port 8081 (http) with context path '/'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:46,297","level":"INFO ","thread":"main","logger":"com.renter.auth.AuthServiceApplication","message":"Started AuthServiceApplication in 12.072 seconds (process running for 13.301)","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:53,463","level":"INFO ","thread":"http-nio-8081-exec-2","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:53,464","level":"INFO ","thread":"http-nio-8081-exec-2","logger":"o.s.web.servlet.DispatcherServlet","message":"Initializing Servlet 'dispatcherServlet'","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:53,467","level":"INFO ","thread":"http-nio-8081-exec-2","logger":"o.s.web.servlet.DispatcherServlet","message":"Completed initialization in 2 ms","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:53,564","level":"INFO ","thread":"http-nio-8081-exec-2","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new9@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:36:54,711","level":"ERROR","thread":"http-nio-8081-exec-2","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new9@example.com - Error: Error creating user: Failed to create user. Status: 409","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:05,786","level":"INFO ","thread":"http-nio-8081-exec-4","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new10@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:05,993","level":"INFO ","thread":"http-nio-8081-exec-4","logger":"c.renter.auth.controller.AuthController","message":"KeycloakUserId is 37b297f3-4dbd-4224-b7bd-63a9c73a576f","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:06,050","level":"WARN ","thread":"http-nio-8081-exec-4","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"SQL Error: 0, SQLState: 23505","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:06,051","level":"ERROR","thread":"http-nio-8081-exec-4","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:06,058","level":"ERROR","thread":"http-nio-8081-exec-4","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new10@example.com - Error: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [users_phone_number_key]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:06,265","level":"INFO ","thread":"http-nio-8081-exec-4","logger":"c.renter.auth.controller.AuthController","message":"Rolled back Keycloak user: 37b297f3-4dbd-4224-b7bd-63a9c73a576f","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:15,985","level":"INFO ","thread":"http-nio-8081-exec-6","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new10@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:16,100","level":"INFO ","thread":"http-nio-8081-exec-6","logger":"c.renter.auth.controller.AuthController","message":"KeycloakUserId is a06a51ef-9f26-4992-86e2-621f54fad956","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:16,102","level":"WARN ","thread":"http-nio-8081-exec-6","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"SQL Error: 0, SQLState: 23505","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:16,103","level":"ERROR","thread":"http-nio-8081-exec-6","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:16,103","level":"ERROR","thread":"http-nio-8081-exec-6","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new10@example.com - Error: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [users_phone_number_key]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:16,174","level":"INFO ","thread":"http-nio-8081-exec-6","logger":"c.renter.auth.controller.AuthController","message":"Rolled back Keycloak user: a06a51ef-9f26-4992-86e2-621f54fad956","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:17,901","level":"INFO ","thread":"http-nio-8081-exec-8","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new10@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:18,013","level":"INFO ","thread":"http-nio-8081-exec-8","logger":"c.renter.auth.controller.AuthController","message":"KeycloakUserId is fbe9fe8b-c21c-4df4-a117-489277ce5bcd","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:18,016","level":"WARN ","thread":"http-nio-8081-exec-8","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"SQL Error: 0, SQLState: 23505","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:18,016","level":"ERROR","thread":"http-nio-8081-exec-8","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:18,017","level":"ERROR","thread":"http-nio-8081-exec-8","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new10@example.com - Error: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [users_phone_number_key]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:18,067","level":"INFO ","thread":"http-nio-8081-exec-8","logger":"c.renter.auth.controller.AuthController","message":"Rolled back Keycloak user: fbe9fe8b-c21c-4df4-a117-489277ce5bcd","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:18,962","level":"INFO ","thread":"http-nio-8081-exec-9","logger":"c.renter.auth.controller.AuthController","message":"Registration attempt for email: new10@example.com","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:19,068","level":"INFO ","thread":"http-nio-8081-exec-9","logger":"c.renter.auth.controller.AuthController","message":"KeycloakUserId is 4b6ab65b-101c-4b3a-af54-28c41d01b8fb","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:19,071","level":"WARN ","thread":"http-nio-8081-exec-9","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"SQL Error: 0, SQLState: 23505","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:19,071","level":"ERROR","thread":"http-nio-8081-exec-9","logger":"o.h.engine.jdbc.spi.SqlExceptionHelper","message":"ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:19,072","level":"ERROR","thread":"http-nio-8081-exec-9","logger":"c.renter.auth.controller.AuthController","message":"Registration failed for email: new10@example.com - Error: could not execute statement [ERROR: duplicate key value violates unique constraint \"users_phone_number_key\"\n  Detail: Key (phone_number)=(9667943363) already exists.] [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into users (created_at,email,email_verified,first_name,is_active,keycloak_user_id,last_name,phone_number,score,updated_at,user_type,id) values (?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [users_phone_number_key]","exception":"","service":"auth-service"}
{"timestamp":"2025-10-04 18:37:19,120","level":"INFO ","thread":"http-nio-8081-exec-9","logger":"c.renter.auth.controller.AuthController","message":"Rolled back Keycloak user: 4b6ab65b-101c-4b3a-af54-28c41d01b8fb","exception":"","service":"auth-service"}
